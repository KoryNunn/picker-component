(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var createPicker=require("../"),crel=require("crel");window.onload=function(){var e=createPicker({options:["foo","bar","baz"]});e.value.on("change",function(e){console.log(e)}),crel(document.body,e.element);var o=createPicker({options:[{something:"Foo",someKey:1},{something:"Bar",someKey:2},{something:"Baz",someKey:3}],itemTemplate:function(e,o,n,t){var r=t(e.get("item.something"));return r.on("click",n),r},currentTemplate:function(e){var o=e.get("item.something");return crel("div",o?"You picked "+e.get("item.something"):"Pick a value")}});o.value.on("change",function(e){console.log(e)}),crel(document.body,o.element);var n=require("fastn")({text:require("fastn/textComponent"),_generic:require("fastn/genericComponent"),list:require("fastn/listComponent"),templater:require("fastn/templaterComponent"),modal:require("modal-component/modalComponent"),picker:require("../pickerComponent")}),t=n("picker",{options:n.binding("items")}).attach({items:["foo","bar","baz"]}).render();t.value.on("change",function(e){console.log(e)}),crel(document.body,t.element)};
},{"../":2,"../pickerComponent":42,"crel":4,"fastn":13,"fastn/genericComponent":12,"fastn/listComponent":15,"fastn/templaterComponent":33,"fastn/textComponent":34,"modal-component/modalComponent":35}],2:[function(require,module,exports){
var fastn=require("fastn")({_generic:require("fastn/genericComponent"),list:require("fastn/listComponent"),templater:require("fastn/templaterComponent"),text:require("fastn/textComponent"),modal:require("modal-component/modalComponent"),picker:require("./pickerComponent")});module.exports=function(e){return fastn("picker",e).attach().render()};

},{"./pickerComponent":42,"fastn":13,"fastn/genericComponent":12,"fastn/listComponent":15,"fastn/templaterComponent":33,"fastn/textComponent":34,"modal-component/modalComponent":35}],3:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};

},{}],4:[function(require,module,exports){
!function(e,n){"object"==typeof exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e.crel=n()}(this,function(){function e(){var o,l=arguments,s=l[0],y=l[1],v=2,g=l.length,h=e[i];if(s=e[c](s)?s:a.createElement(s),1===g)return s;if((!d(y,t)||e[u](y)||p(y))&&(--v,y=null),g-v===1&&d(l[v],"string")&&void 0!==s[r])s[r]=l[v];else for(;g>v;++v)if(o=l[v],null!=o)if(p(o))for(var x=0;x<o.length;++x)m(s,o[x]);else m(s,o);for(var N in y)if(h[N]){var b=h[N];typeof b===n?b(s,y[N]):s[f](b,y[N])}else s[f](N,y[N]);return s}var n="function",t="object",o="nodeType",r="textContent",f="setAttribute",i="attrMap",u="isNode",c="isElement",a=typeof document===t?document:{},d=function(e,n){return typeof e===n},l=typeof Node===n?function(e){return e instanceof Node}:function(e){return e&&d(e,t)&&o in e&&d(e.ownerDocument,t)},s=function(n){return e[u](n)&&1===n[o]},p=function(e){return e instanceof Array},m=function(n,t){e[u](t)||(t=a.createTextNode(t)),n.appendChild(t)};return e[i]={},e[c]=s,e[u]=l,e});

},{}],5:[function(require,module,exports){
"use strict";module.exports=function(e,d){var t=e+"_defaultstyle",o=document.getElementById(t),n=document.querySelector('link[rel="stylesheet"],style');return o?o:(o=document.createElement("style"),o.innerHTML=d,n?n.parentNode.insertBefore(o,n):document.head?document.head.appendChild(o):document.body&&document.body.childNodes.length>0?document.body.insertBefore(o,document.body.childNodes[0]):document.body&&document.body.appendChild(o),o)};

},{}],6:[function(require,module,exports){
function flatten(t){return Array.isArray(t)?t.reduce(function(t,n){return null==n?t:t.concat(flatten(n))},[]):t}function attachProperties(t,n){for(var e in this._properties)this._properties[e].attach(t,n)}function onRender(){this.attach(void 0,0);for(var t in this._properties)this._properties[t].update()}function detachProperties(t){for(var n in this._properties)this._properties[n].detach(t)}function destroyProperties(){for(var t in this._properties)this._properties[t].destroy()}function clone(){return this.fastn(this.component._type,this.component._settings,this.component._children.filter(function(t){return!t._templated}).map(function(t){return t.clone()}))}function getSetBinding(t){return arguments.length?(is.binding(t)||(t=this.fastn.binding(t)),this.binding&&this.binding!==t&&(this.binding.removeListener("change",this.emitAttach),t.attach(this.binding._model,this.binding._firm)),this.binding=t,this.binding.on("change",this.emitAttach),this.binding.on("detach",this.emitDetach),this.emitAttach(),this.component):this.binding}function emitAttach(){var t=this.binding();t!==this.lastBound&&(this.lastBound=t,this.scope.attach(this.lastBound),this.component.emit("attach",this.scope,1))}function emitDetach(){this.component.emit("detach",1)}function getScope(){return this.scope}function destroy(){return this.destroyed?void 0:(this.destroyed=!0,this.component.removeAllListeners("render").removeAllListeners("attach"),this.component.emit("destroy"),this.component.element=null,this.scope.destroy(),this.binding.destroy(),this.component)}function attachComponent(t,n){return this.binding.attach(t,n),this.component}function detachComponent(t){return this.binding.detach(t),this.component}function isDestroyed(){return this.destroyed}function setProperty(t,n){return n||(n=this.component[t]||this.fastn.property()),this.component[t]=n,this.component._properties[t]=n,this.component}function extendComponent(t,n,e){if(t in this.types)return this.component;if(t in this.fastn.components)this.fastn.components[t](this.fastn,this.component,t,n,e);else{if(!(GENERIC in this.fastn.components))throw new Error('No component of type "'+t+'" is loaded');this.fastn.components._generic(this.fastn,this.component,t,n,e),this.types._generic=!0}return this.types[t]=!0,this.component}function isType(t){return t in this.types}function FastnComponent(t,n,e,i){var o=this,s={types:{},fastn:t,component:o,binding:t.binding("."),destroyed:!1,scope:new t.Model(!1),lastBound:null};s.emitAttach=emitAttach.bind(s),s.emitDetach=emitDetach.bind(s),s.binding._default_binding=!0,o._type=n,o._properties={},o._settings=e||{},o._children=i?flatten(i):[],o.attach=attachComponent.bind(s),o.detach=detachComponent.bind(s),o.scope=getScope.bind(s),o.destroy=destroy.bind(s),o.destroyed=isDestroyed.bind(s),o.binding=getSetBinding.bind(s),o.setProperty=setProperty.bind(s),o.clone=clone.bind(s),o.children=slice.bind(o._children),o.extend=extendComponent.bind(s),o.is=isType.bind(s),o.binding(s.binding),o.on("attach",attachProperties.bind(this)),o.on("render",onRender.bind(this)),o.on("detach",detachProperties.bind(this)),o.on("destroy",destroyProperties.bind(this)),t.debug&&o.on("render",function(){o.element&&"object"==typeof o.element&&(o.element._component=o)})}var is=require("./is"),GENERIC="_generic",EventEmitter=require("events").EventEmitter,slice=Array.prototype.slice;FastnComponent.prototype=Object.create(EventEmitter.prototype),FastnComponent.prototype.constructor=FastnComponent,FastnComponent.prototype._fastn_component=!0,module.exports=FastnComponent;

},{"./is":14,"events":3}],7:[function(require,module,exports){
function fuseBinding(){function e(){n||o(r.apply(null,a.map(function(e){return e()})))}var t,n,i=Array.prototype.slice.call(arguments),a=i.slice(),r=a.pop(),o=createBinding("result");o._arguments=i,"function"!=typeof a[a.length-1]||is.binding(a[a.length-1])||(t=r,r=a.pop()),o._model.removeAllListeners(),o._set=function(e){if(t){n=!0;var i=t(e);same(i,a[0]())||(a[0](i),o._change(i)),n=!1}else o._change(e)},a.forEach(function(t,n){is.binding(t)||(t=createBinding(t),a.splice(n,1,t)),t.on("change",e),o.on("detach",t.detach)});var c;return o.on("attach",function(t){n=!0,a.forEach(function(e){e.attach(t,1)}),n=!1,c!==t&&e(),c=t}),o}function createValueBinding(){var e=createBinding("value");return e.attach=function(){return e},e.detach=function(){return e},e}function bindingTemplate(e){if(!arguments.length)return this.value;if("."!==this.binding._fastn_binding)return this.binding._set(e),this.binding}function createBinding(e,t){function n(t){o._model.attach(t),o._change(o._model.get(e)),o.emit("attach",t,1)}function i(){o._model.detach()}if(t)return fuseBinding.apply(null,arguments);if(null==e)return createValueBinding();var a,r={},o=r.binding=bindingTemplate.bind(r);return setPrototypeOf(o,functionEmitter),o.setMaxListeners(1e4),o._arguments=[e],o._model=new Enti(!1),o._fastn_binding=e,o._firm=-(1/0),o.attach=function(e,t){if(firmer(o,t))return o;o._firm=t;var a=Enti.isEnti(e);return a&&r.attachedModel===e?o:(r.attachedModel&&(r.attachedModel.removeListener("attach",n),r.attachedModel.removeListener("detach",i),r.attachedModel=null),a&&(r.attachedModel=e,r.attachedModel.on("attach",n),r.attachedModel.on("detach",i),e=e._model),e instanceof Object||(e={}),o._model._model===e?o:(n(e),o))},o.detach=function(e){return firmer(o,e)?o:(r.value=void 0,o._model.isAttached()&&o._model.detach(),o.emit("detach",1),o)},o._set=function(t){same(o._model.get(e),t)||(o._model.isAttached()||o._model.attach(o._model.get(".")),o._model.set(e,t))},o._change=function(e){r.value=e,o.emit("change",o())},o.clone=function(e){var t=createBinding.apply(null,o._arguments);return e&&t.attach(r.attachedModel||o._model._model,o._firm),t},o.destroy=function(e){a||e&&o.listeners("change").length||(a=!0,o.emit("destroy"),o.detach(),o._model.destroy())},o.destroyed=function(){return a},"."!==e&&o._model.on(e,o._change),o}function from(e){return is.binding(e)?e:createBinding()(e)}var Enti=require("enti"),is=require("./is"),firmer=require("./firmer"),functionEmitter=require("./functionEmitter"),setPrototypeOf=require("setprototypeof"),same=require("same-value");createBinding.from=from,module.exports=createBinding;

},{"./firmer":10,"./functionEmitter":11,"./is":14,"enti":17,"same-value":22,"setprototypeof":25}],8:[function(require,module,exports){
function insertChild(e,n,t,r){var i=n._children.indexOf(t),o=e.toComponent(t);o!==t&&n._children.splice(i,1,o),~i&&o===t||o.attach(n.scope(),1),i!==r&&(~i&&n._children.splice(i,1),n._children.splice(r,0,o)),n.element&&(o.element||o.render(),n._insert(o.element,r),o.emit("insert",n))}function getContainerElement(){return this.containerElement||this.element}function insert(e,n){var t=e,r=this.container,i=this.fastn;if(n&&"object"==typeof n&&(t=Array.prototype.slice.call(arguments)),isNaN(n)&&(n=r._children.length),Array.isArray(t))for(var o=0;o<t.length;o++)r.insert(t[o],o+n);else insertChild(i,r,t,n);return r}module.exports=function(e,n,t,r,i){return n.insert=insert.bind({container:n,fastn:e}),n._insert=function(e,t){var r=n.getContainerElement();r&&r.childNodes[t]!==e&&r.insertBefore(e,r.childNodes[t])},n.remove=function(e){var t=n._children.indexOf(e);~t&&n._children.splice(t,1),e.detach(1),e.element&&n._remove(e.element)},n._remove=function(e){var t=n.getContainerElement();e&&t&&e.parentNode===t&&t.removeChild(e)},n.empty=function(){for(;n._children.length;)n.remove(n._children.pop())},n.replaceChild=function(e,t){var r=n._children.indexOf(e);~r&&(n.remove(e),n.insert(t,r))},n.getContainerElement=getContainerElement.bind(n),n.on("render",n.insert.bind(null,n._children,0)),n.on("attach",function(t,r){for(var i=0;i<n._children.length;i++)e.isComponent(n._children[i])&&n._children[i].attach(t,r)}),n.on("destroy",function(t,r){for(var i=0;i<n._children.length;i++)e.isComponent(n._children[i])&&n._children[i].destroy(r)}),n};

},{}],9:[function(require,module,exports){
function updateTextProperty(e,t,n){return 2===arguments.length?t.textContent:void(t.textContent=null==n?"":n)}var setify=require("setify"),classist=require("classist");module.exports={"class":function(e,t,n){return e._classist||(e._classist=classist(t)),arguments.length<3?e._classist():void e._classist(n)},display:function(e,t,n){return 2===arguments.length?"none"!==t.style.display:void(t.style.display=n?null:"none")},disabled:function(e,t,n){return 2===arguments.length?t.hasAttribute("disabled"):void(n?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled"))},textContent:updateTextProperty,innerText:updateTextProperty,innerHTML:updateTextProperty,value:function(e,t,n){var l=t.type;return"INPUT"===t.nodeName&&"date"===l?2===arguments.length?t.value?new Date(t.value.replace(/-/g,"/").replace("T"," ")):null:(n=null!=n?new Date(n):null,void(!n||isNaN(n)?t.value=null:t.value=[n.getFullYear(),("0"+(n.getMonth()+1)).slice(-2),("0"+n.getDate()).slice(-2)].join("-"))):2===arguments.length?t.value:(void 0===n&&(n=null),void setify(t,n))},style:function(e,t,n){if(2===arguments.length)return t.style;for(var l in n)t.style[l]=n[l]}};

},{"classist":16,"setify":23}],10:[function(require,module,exports){
module.exports=function(i,o){return null!=o&&(void 0===i._firm||o<i._firm)?!0:void 0};

},{}],11:[function(require,module,exports){
var EventEmitter=require("events").EventEmitter,functionEmitterPrototype=function(){};for(var key in EventEmitter.prototype)functionEmitterPrototype[key]=EventEmitter.prototype[key];module.exports=functionEmitterPrototype;

},{"events":3}],12:[function(require,module,exports){
function createProperties(e,n,t){for(var r in t){var o=t[r];("function"!=typeof o||e.isProperty(o)||e.isBinding(o))&&n.addDomProperty(r)}}function addDomHandler(e,n,t,r,o){var i=t.split(".");"on"===i[0]&&i.shift();var a=function(n){e.emit(t,n,e.scope())};n.addEventListener(r,a,o),e.on("destroy",function(){n.removeEventListener(r,a,o)})}function addDomHandlers(e,n,t){for(var r=t.split(" "),o=0;o<r.length;o++){var i=r[o],a=i.match(matchDomHandlerName);a&&(a[1]||"on"+a[2]in n)&&addDomHandler(e,n,t,a[2],a[3])}}function addAutoHandler(e,n,t,r){if(r[t]){var o=r[t].split(":"),i=t.slice(2);delete r[t];var a=function(t){var r=fancyProps[o[1]],i=r?r(e,n):n[o[1]];e[o[0]](i)};n.addEventListener(i,a),e.on("destroy",function(){n.removeEventListener(i,a)})}}function addDomProperty(e,n,t){function r(){var e=o.getPropertyElement(n),r=t();if(e&&!o.destroyed()){var i=n in e,a=fancyProps[n],d=a?a(o,e):i?e[n]:e.getAttribute(n);if(a||i||null!=r||(r=""),r!==d){if(a)return void a(o,e,r);if(i)return void(e[n]=r);"function"!=typeof r&&"object"!=typeof r&&e.setAttribute(n,r)}}}var o=this;t=t||o[n]||e.property(),o.setProperty(n,t),t.updater(r)}function onRender(){var e,n=this;for(var t in n._settings)e=n.getEventElement(t),"on"===t.slice(0,2)&&t in e&&addAutoHandler(n,e,t,n._settings);for(var r in n._events)e=n.getEventElement(t),addDomHandlers(n,e,r)}function render(){return this.element=this.createElement(this._settings.tagName||this._tagName),this.emit("render"),this}function genericComponent(e,n,t,r,o){return n.is(t)?n:(t===GENERIC?n._tagName=n._tagName||"div":n._tagName=t,n.is(GENERIC)?n:(n.extend("_container",r,o),n.addDomProperty=addDomProperty.bind(n,e),n.getEventElement=n.getContainerElement,n.getPropertyElement=n.getContainerElement,n.updateProperty=genericComponent.updateProperty,n.createElement=genericComponent.createElement,createProperties(e,n,r),n.render=render.bind(n),n.on("render",onRender),n))}var containerComponent=require("./containerComponent"),schedule=require("./schedule"),fancyProps=require("./fancyProps"),matchDomHandlerName=/^((?:el\.)?)([^. ]+)(?:\.(capture))?$/,GENERIC="_generic";genericComponent.updateProperty=function(e,n,t){"undefined"!=typeof document&&document.contains(e.element)?schedule(n,t):t()},genericComponent.createElement=function(e){return e instanceof Node?e:document.createElement(e)},module.exports=genericComponent;

},{"./containerComponent":8,"./fancyProps":9,"./schedule":32}],13:[function(require,module,exports){
function inflateProperties(e,n){for(var t in n){var i=n[t],r=e[t];is.property(n[t])?(is.property(r)&&r.destroy(),i.addTo(e,t)):is.property(r)&&(is.binding(i)?r.binding(i):r(i),r.addTo(e,t))}}function validateExpectedComponents(e,n,t){t=t.filter(function(n){return!(n in e)}),t.length&&console.warn(['fastn("'+n+'") uses some components that have not been registered with fastn',"Expected conponent constructors: "+t.join(", ")].join("\n\n"))}var createProperty=require("./property"),createBinding=require("./binding"),BaseComponent=require("./baseComponent"),crel=require("crel"),Enti=require("enti"),objectAssign=require("object-assign"),is=require("./is");module.exports=function(e,n){function t(e){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=n[1],o=2,s=t.toComponent(n[1]);(Array.isArray(n[1])||s||!n[1])&&(n[1]=s||n[1],o--,r=null),r=objectAssign({},r||{});for(var a,p="string"==typeof e?e.split(":"):Array.isArray(e)?e:[e],c=n.slice(o),d=t.base(e,r,c);a=p.shift();)d.extend(a,r,c);return d._properties={},inflateProperties(d,r),d}if(!e||"object"!=typeof e)throw new Error("fastn must be initialised with a components object");e._container=e._container||require("./containerComponent"),t.toComponent=function(e){return null!=e?is.component(e)?e:"object"!=typeof e||e instanceof Date?t("text",{auto:!0},e):crel.isElement(e)?t(e):crel.isNode(e)?t("text",{auto:!0},e.textContent):void 0:void 0},t.debug=n,t.property=createProperty,t.binding=createBinding,t.isComponent=is.component,t.isBinding=is.binding,t.isDefaultBinding=is.defaultBinding,t.isBindingObject=is.bindingObject,t.isProperty=is.property,t.components=e,t.Model=Enti,t.base=function(e,n,i){return new BaseComponent(t,e,n,i)};for(var i in e){var r=e[i];r.expectedComponents&&validateExpectedComponents(e,i,r.expectedComponents)}return t};

},{"./baseComponent":6,"./binding":7,"./containerComponent":8,"./is":14,"./property":31,"crel":4,"enti":17,"object-assign":21}],14:[function(require,module,exports){
function isComponent(n){return n&&typeof n===OBJECT&&FASTNCOMPONENT in n}function isBindingObject(n){return n&&typeof n===OBJECT&&FASTNBINDING in n}function isBinding(n){return typeof n===FUNCTION&&FASTNBINDING in n}function isProperty(n){return typeof n===FUNCTION&&FASTNPROPERTY in n}function isDefaultBinding(n){return typeof n===FUNCTION&&FASTNBINDING in n&&DEFAULTBINDING in n}var FUNCTION="function",OBJECT="object",FASTNBINDING="_fastn_binding",FASTNPROPERTY="_fastn_property",FASTNCOMPONENT="_fastn_component",DEFAULTBINDING="_default_binding";module.exports={component:isComponent,bindingObject:isBindingObject,binding:isBinding,defaultBinding:isDefaultBinding,property:isProperty};

},{}],15:[function(require,module,exports){
function each(e,t){if(e&&"object"==typeof e)if(Array.isArray(e))for(var r=0;r<e.length;r++)t(e[r],r);else for(var n in e)t(e[n],n)}function keyFor(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){var r=e.indexOf(t);return r>=0?r:!1}for(var n in e)if(e[n]===t)return n;return!1}var MultiMap=require("multimap"),merge=require("flat-merge");MultiMap.Map=Map,module.exports=function(e,t,r,n,a){function o(){function r(r,n){for(var o,i;f<t._children.length&&!t._children[f]._templated;)f++;Array.isArray(r)&&r[0]===c&&(i=!0,o=r[2],r=r[1]);var p;i?(p=s.get(o),p.set("key",n)):(p=new e.Model({item:r,key:n}),o=e.toComponent(a(p,t.scope())),o||(o=e("template")),o._listItem=r,o._templated=!0,s.set(o,p),m.set(r,o)),e.isComponent(o)&&t._settings.attachTemplates!==!1&&o.attach(p,2),t.insert(o,f),f++}var n=t.items(),a=t.template(),o=t.emptyTemplate(),l=p!==a,y=merge(a?n:[]);m.forEach(function(e,t){var r=keyFor(y,t);l||r===!1?(i(e),m["delete"](t)):y[r]=[c,t,e]});var f=0;if(each(y,r),p=a,0===f&&o){var u=e.toComponent(o(t.scope()));u||(u=e("template")),u._templated=!0,m.set({},u),t.insert(u)}}function i(e){t.remove(e),e.destroy()}e.components._generic?t.extend("_generic",n,a):t.extend("_container",n,a);var p,m=new MultiMap,s=new WeakMap,c={};return t.setProperty("items",e.property([],n.itemChanges||"type keys shallowStructure").on("change",o)),t.setProperty("template",e.property().on("change",o)),t.setProperty("emptyTemplate",e.property().on("change",o)),t};

},{"flat-merge":18,"multimap":20}],16:[function(require,module,exports){
var flatten=require("flatten");module.exports=function(n){var t=[];return function(r){function a(n,t){return"string"==typeof t&&t.match(/\s/)&&(t=t.split(" ")),Array.isArray(t)?n.concat(t.reduce(a,[])):(null!=t&&""!==t&&n.push(String(t).trim()),n)}if(!arguments.length)return t.join(" ");var e=a([],r),i=n.className?n.className.split(" "):[];t.map(function(n){if(n){var t=i.indexOf(n);~t&&i.splice(t,1)}}),i=i.concat(e),t=e,n.className=i.join(" ")}};

},{"flatten":19}],17:[function(require,module,exports){
(function (global){
function toArray(t){return Array.prototype.slice.call(t)}function matchDeep(t){return(t+"").match(deepRegex)}function isWildcardPath(t){var e=t+"";return~e.indexOf("*")}function getTargetKey(t){var e=t+"";return e.split("|").shift()}function leftAndRest(t){var e=t+"";if(".|"===e.slice(0,2))return[".",e.slice(2)];var r=matchDeep(e);return r?[e.slice(0,r.index),e.slice(r.index+1)]:e}function isWildcardKey(t){return"*"===t.charAt(0)}function isFeralcardKey(t){return"**"===t}function addHandler(t,e,r){var n=trackedObjects.get(t);null==n&&(n={},trackedObjects.set(t,n));var i=n[e];i||(i=new Set,n[e]=i),i.add(r)}function removeHandler(t,e,r){var n=trackedObjects.get(t);if(null!=n){var i=n[e];i&&i["delete"](r)}}function trackObjects(t,e,r,n,i,a){function o(n,i,a){for(var o=Object.keys(n),s=0;s<o.length;s++)isFeralcardKey(i)?trackObjects(t,e,r,n,o[s],"**"+(a?".":"")+(a||"")):trackObjects(t,e,r,n,o[s],a)}if(n&&"object"==typeof n){var s="**"===i?"*":i,c=n[i],l=c&&"object"==typeof c;if(!l||!e.has(c)){var f=function(d,u,y){return"*"!==s&&"object"==typeof n[s]&&n[s]!==c?(l&&e["delete"](c),removeHandler(n,s,f),void trackObjects(t,e,r,n,i,a)):("*"===s&&o(n,i,a),void(e.has(n)&&("**"===i&&a||r(d,u,y))))};if(addHandler(n,s,f),l&&(e.set(c,null),a)){var d,u,y=leftAndRest(a);Array.isArray(y)?(d=y[0],u=y[1],"."===d&&(d="*")):d=y,l&&isWildcardKey(d)&&o(c,d,u),trackObjects(t,e,r,c,d,u)}}}}function createHandler(t,e,r,n){var i=t._model;return function(t,a){r.entis.forEach(function(o){if(o._emittedEvents[n]!==a){if(o._model!==i)return r.entis["delete"](o),void(0===r.entis.size&&(delete e[n],Object.keys(e).length||trackedEvents["delete"](i)));o._emittedEvents[n]=a;var s=getTargetKey(n),c=isWildcardPath(s)?void 0:o.get(s);o.emit(n,c,t)}})}}function trackPath(t,e){var r=t._model,n=trackedEvents.get(r);n||(n={},trackedEvents.set(r,n));var i=n[e];if(i){if(i.entis.has(t))return}else i={entis:new Set,trackedObjects:new WeakMap},n[e]=i;i.entis.add(t);var a=createHandler(t,n,i,e);trackObjects(e,i.trackedObjects,a,{model:r},"model",e)}function trackPaths(t){if(t._events&&t._model){for(var e in t._events)trackPath(t,e);modifiedEnties["delete"](t)}}function emitEvent(t,e,r,n){function i(t){t(o,n)}modifiedEnties.forEach(trackPaths);var a=trackedObjects.get(t);if(a){var o={value:r,key:e,object:t};a[e]&&a[e].forEach(i),a["*"]&&a["*"].forEach(i)}}function emit(t){var e={};t.forEach(function(t){emitEvent(t[0],t[1],t[2],e)})}function Enti(t){var e=t===!1;(!t||"object"!=typeof t&&"function"!=typeof t)&&(t={}),this._emittedEvents={},e?this._model={}:this.attach(t),this.on("newListener",function(){modifiedEnties.add(this)})}var EventEmitter=require("events").EventEmitter,deepRegex=/[|.]/i,eventSystemVersion=1,globalKey="_entiEventState"+eventSystemVersion;globalState=global[globalKey]=global[globalKey]||{instances:[]};var modifiedEnties=globalState.modifiedEnties=globalState.modifiedEnties||new Set,trackedObjects=globalState.trackedObjects=globalState.trackedObjects||new WeakMap,trackedEvents=new WeakMap;Enti.get=function(t,e){if(t&&"object"==typeof t){if(e=getTargetKey(e),"."===e)return t;var r=leftAndRest(e);return Array.isArray(r)?Enti.get(t[r[0]],r[1]):t[e]}},Enti.set=function(t,e,r){if(t&&"object"==typeof t){e=getTargetKey(e);var n=leftAndRest(e);if(Array.isArray(n))return Enti.set(t[n[0]],n[1],r);var i=t[e];if("object"==typeof r||r!==i){var a=!(e in t);t[e]=r;var o=[[t,e,r]];a&&Array.isArray(t)&&o.push([t,"length",t.length]),emit(o)}}},Enti.push=function(t,e,r){if(t&&"object"==typeof t){var n;if(arguments.length<3)r=e,e=".",n=t;else{var i=leftAndRest(e);if(Array.isArray(i))return Enti.push(t[i[0]],i[1],r);n=t[e]}if(!Array.isArray(n))throw"The target is not an array.";n.push(r);var a=[[n,n.length-1,r],[n,"length",n.length]];emit(a)}},Enti.insert=function(t,e,r,n){if(t&&"object"==typeof t){var i;if(arguments.length<4)n=r,r=e,e=".",i=t;else{var a=leftAndRest(e);if(Array.isArray(a))return Enti.insert(t[a[0]],a[1],r,n);i=t[e]}if(!Array.isArray(i))throw"The target is not an array.";i.splice(n,0,r);var o=[[i,n,r],[i,"length",i.length]];emit(o)}},Enti.remove=function(t,e,r){if(t&&"object"==typeof t){var n=leftAndRest(e);if(Array.isArray(n))return Enti.remove(t[n[0]],n[1],r);if(null!=r)return void Enti.remove(t[e],r);if("."===e)throw". (self) is not a valid key to remove";var i=[];Array.isArray(t)?(t.splice(e,1),i.push([t,"length",t.length])):(delete t[e],i.push([t,e])),emit(i)}},Enti.move=function(t,e,r){if(t&&"object"==typeof t){var n=leftAndRest(e);if(Array.isArray(n))return Enti.move(t[n[0]],n[1],r);if(e!==r){if(!Array.isArray(t))throw"The model is not an array.";var i=t[e];t.splice(e,1),t.splice(r-(r>e?0:1),0,i),emit([[t,r,i]])}}},Enti.update=function(t,e,r){function n(t,e){for(var r in e)t[r]&&"object"==typeof t[r]?n(t[r],e[r]):(t[r]=e[r],s.push([t,r,e[r]]));Array.isArray(t)&&s.push([t,"length",t.length])}if(t&&"object"==typeof t){var i,a=Array.isArray(r);if(arguments.length<3)r=e,e=".",i=t;else{var o=leftAndRest(e);if(Array.isArray(o))return Enti.update(t[o[0]],o[1],r);i=t[e],null==i&&(t[e]=a?[]:{})}if("object"!=typeof r)throw"The value is not an object.";if("object"!=typeof i)throw"The target is not an object.";var s=[];n(i,r),emit(s)}},Enti.prototype=Object.create(EventEmitter.prototype),Enti.prototype._maxListeners=100,Enti.prototype.constructor=Enti,Enti.prototype.attach=function(t){this._model!==t&&this.detach(),modifiedEnties.add(this),this._attached=!0,this._model=t,this.emit("attach",t)},Enti.prototype.detach=function(){modifiedEnties["delete"](this),this._emittedEvents={},this._model={},this._attached=!1,this.emit("detach")},Enti.prototype.destroy=function(){this.detach(),this._events=null,this.emit("destroy")},Enti.prototype.get=function(t){return Enti.get(this._model,t)},Enti.prototype.set=function(t,e){return Enti.set(this._model,t,e)},Enti.prototype.push=function(t,e){return Enti.push.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.insert=function(t,e,r){return Enti.insert.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.remove=function(t,e){return Enti.remove.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.move=function(t,e){return Enti.move.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.update=function(t,e){return Enti.update.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.isAttached=function(){return this._attached},Enti.prototype.attachedCount=function(){return modifiedEnties.size},Enti.isEnti=function(t){return t&&!!~globalState.instances.indexOf(t.constructor)},globalState.instances.push(Enti),module.exports=Enti;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"events":3}],18:[function(require,module,exports){
function flatMerge(e,t){t&&"object"==typeof t||(t={}),e&&"object"==typeof e||(e=new t.constructor);for(var o=new e.constructor,r=Object.keys(e),c=Object.keys(t),n=0;n<r.length;n++)o[r[n]]=e[r[n]];for(var n=0;n<c.length;n++)o[c[n]]=t[c[n]];return o}module.exports=flatMerge;

},{}],19:[function(require,module,exports){
module.exports=function(r,n){function t(r,e){return r.reduce(function(r,u){return Array.isArray(u)&&n>e?r.concat(t(u,e+1)):r.concat(u)},[])}return n="number"==typeof n?n:1/0,t(r,1)};

},{}],20:[function(require,module,exports){
"use strict";function mapEach(t,e){for(var r,n=t.keys();!(r=n.next()).done;)e(t.get(r.value),r.value,t)}var Multimap=function(){function t(e){var n=this;n._map=r,t.Map&&(n._map=t.Map),n._=n._map?new n._map:{},e&&e.forEach(function(t){n.set(t[0],t[1])})}function e(t){if(Array.isArray(t)){var r=0;return{next:function(){return r<t.length?{value:t[r++],done:!1}:{done:!0}}}}return!t.next&&n&&(t.next=n(t,e)),t}var r;"undefined"!=typeof Map&&(r=Map),t.prototype.get=function(t){return this._map?this._.get(t):this._[t]},t.prototype.set=function(t,e){var r=Array.prototype.slice.call(arguments);t=r.shift();var n=this.get(t);return n||(n=[],this._map?this._.set(t,n):this._[t]=n),Array.prototype.push.apply(n,r),this},t.prototype["delete"]=function(t,e){if(!this.has(t))return!1;if(1==arguments.length)return this._map?this._["delete"](t):delete this._[t],!0;var r=this.get(t),n=r.indexOf(e);return-1!=n?(r.splice(n,1),!0):!1},t.prototype.has=function(t,e){var r=this._map?this._.has(t):this._.hasOwnProperty(t);if(1==arguments.length||!r)return r;var n=this.get(t)||[];return-1!=n.indexOf(e)},t.prototype.keys=function(){return e(this._map?this._.keys():Object.keys(this._))},t.prototype.values=function(){var t=[];return this.forEachEntry(function(e){Array.prototype.push.apply(t,e)}),e(t)},t.prototype.forEachEntry=function(t){mapEach(this,t)},t.prototype.forEach=function(t){var e=this;e.forEachEntry(function(r,n){r.forEach(function(r){t(r,n,e)})})},t.prototype.clear=function(){this._map?this._.clear():this._={}},Object.defineProperty(t.prototype,"size",{configurable:!1,enumerable:!0,get:function(){var t=0;return mapEach(this,function(e){t+=e.length}),t}});var n;try{n=new Function("iterator","makeIterator","var keysArray = []; for(var key of iterator){keysArray.push(key);} return makeIterator(keysArray).next;")}catch(a){}return t}();"object"==typeof exports&&module&&module.exports?module.exports=Multimap:"function"==typeof define&&define.amd&&define(function(){return Multimap});

},{}],21:[function(require,module,exports){
"use strict";function ToObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function ownEnumerableKeys(e){var r=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e))),r.filter(function(r){return propIsEnumerable.call(e,r)})}var propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=Object.assign||function(e,r){for(var t,n,o=ToObject(e),c=1;c<arguments.length;c++){t=arguments[c],n=ownEnumerableKeys(Object(t));for(var u=0;u<n.length;u++)o[n[u]]=t[n[u]]}return o};

},{}],22:[function(require,module,exports){
module.exports=function(t,e){return t===e?!0:typeof t==typeof e&&("object"!=typeof t||t instanceof Date&&e instanceof Date)?String(t)===String(e):!1};

},{}],23:[function(require,module,exports){
var naturalSelection=require("natural-selection");module.exports=function(e,t){var n=naturalSelection(e)&&e===document.activeElement;if(n){var a=e.selectionStart,l=e.selectionEnd;e.value=t,e.setSelectionRange(a,l)}else e.value=t};

},{"natural-selection":24}],24:[function(require,module,exports){
var supportedTypes=["text","search","tel","url","password"];module.exports=function(e){return!(!e.setSelectionRange||!~supportedTypes.indexOf(e.type))};

},{}],25:[function(require,module,exports){
function setProtoOf(o,t){o.__proto__=t}function mixinProperties(o,t){for(var r in t)o[r]=t[r]}module.exports=Object.setPrototypeOf||{__proto__:[]}instanceof Array?setProtoOf:mixinProperties;

},{}],26:[function(require,module,exports){
function keysAreDifferent(e,t){if(e!==t){if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(!~t.indexOf(e[r]))return!0}}function getKeys(e){return e&&"object"==typeof e?Object.keys(e):void 0}function WhatChanged(e,t){if(this._changesToTrack={},null==t&&(t="value type keys structure reference"),"string"!=typeof t)throw"changesToTrack must be of type string";t=t.split(" ");for(var r=0;r<t.length;r++)this._changesToTrack[t[r]]=!0;this.update(e)}var clone=require("clone"),deepEqual=require("deep-equal");WhatChanged.prototype.update=function(e){var t={},r=this._changesToTrack,s=getKeys(e);if("value"in r&&e+""!=this._lastReference+""&&(t.value=!0),("type"in r&&typeof e!=typeof this._lastValue||(null===e||null===this._lastValue)&&this.value!==this._lastValue)&&(t.type=!0),"keys"in r&&keysAreDifferent(this._lastKeys,getKeys(e))&&(t.keys=!0),null!==e&&"object"==typeof e){var n=this._lastValue;"shallowStructure"in r&&(!n||"object"!=typeof n||Object.keys(e).some(function(t,r){return e[t]!==n[t]}))&&(t.shallowStructure=!0),"structure"in r&&!deepEqual(e,n)&&(t.structure=!0),"reference"in r&&e!==this._lastReference&&(t.reference=!0)}return this._lastValue="structure"in r?clone(e):"shallowStructure"in r?clone(e,!0,1):e,this._lastReference=e,this._lastKeys=s,t},module.exports=WhatChanged;

},{"clone":27,"deep-equal":28}],27:[function(require,module,exports){
var clone=function(){"use strict";function e(t,r,n,o){function f(t,n){if(null===t)return null;if(0==n)return t;var i,a;if("object"!=typeof t)return t;if(e.__isArray(t))i=[];else if(e.__isRegExp(t))i=new RegExp(t.source,u(t)),t.lastIndex&&(i.lastIndex=t.lastIndex);else if(e.__isDate(t))i=new Date(t.getTime());else{if(p&&Buffer.isBuffer(t))return i=new Buffer(t.length),t.copy(i),i;"undefined"==typeof o?(a=Object.getPrototypeOf(t),i=Object.create(a)):(i=Object.create(o),a=o)}if(r){var s=c.indexOf(t);if(-1!=s)return l[s];c.push(t),l.push(i)}for(var y in t){var b;a&&(b=Object.getOwnPropertyDescriptor(a,y)),b&&null==b.set||(i[y]=f(t[y],n-1))}return i}var i;"object"==typeof r&&(n=r.depth,o=r.prototype,i=r.filter,r=r.circular);var c=[],l=[],p="undefined"!=typeof Buffer;return"undefined"==typeof r&&(r=!0),"undefined"==typeof n&&(n=1/0),f(t,n)}function t(e){return Object.prototype.toString.call(e)}function r(e){return"object"==typeof e&&"[object Date]"===t(e)}function n(e){return"object"==typeof e&&"[object Array]"===t(e)}function o(e){return"object"==typeof e&&"[object RegExp]"===t(e)}function u(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return e.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},e.__objToStr=t,e.__isDate=r,e.__isArray=n,e.__isRegExp=o,e.__getRegExpFlags=u,e}();"object"==typeof module&&module.exports&&(module.exports=clone);

},{}],28:[function(require,module,exports){
function isUndefinedOrNull(e){return null===e||void 0===e}function isBuffer(e){return e&&"object"==typeof e&&"number"==typeof e.length?"function"!=typeof e.copy||"function"!=typeof e.slice?!1:e.length>0&&"number"!=typeof e[0]?!1:!0:!1}function objEquiv(e,t,r){var n,i;if(isUndefinedOrNull(e)||isUndefinedOrNull(t))return!1;if(e.prototype!==t.prototype)return!1;if(isArguments(e))return isArguments(t)?(e=pSlice.call(e),t=pSlice.call(t),deepEqual(e,t,r)):!1;if(isBuffer(e)){if(!isBuffer(t))return!1;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}try{var u=objectKeys(e),o=objectKeys(t)}catch(f){return!1}if(u.length!=o.length)return!1;for(u.sort(),o.sort(),n=u.length-1;n>=0;n--)if(u[n]!=o[n])return!1;for(n=u.length-1;n>=0;n--)if(i=u[n],!deepEqual(e[i],t[i],r))return!1;return typeof e==typeof t}var pSlice=Array.prototype.slice,objectKeys=require("./lib/keys.js"),isArguments=require("./lib/is_arguments.js"),deepEqual=module.exports=function(e,t,r){return r||(r={}),e===t?!0:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:objEquiv(e,t,r)};

},{"./lib/is_arguments.js":29,"./lib/keys.js":30}],29:[function(require,module,exports){
function supported(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function unsupported(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var supportsArgumentsClass="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();exports=module.exports=supportsArgumentsClass?supported:unsupported,exports.supported=supported,exports.unsupported=unsupported;

},{}],30:[function(require,module,exports){
function shim(e){var s=[];for(var t in e)s.push(t);return s}exports=module.exports="function"==typeof Object.keys?Object.keys:shim,exports.shim=shim;

},{}],31:[function(require,module,exports){
function propertyTemplate(t){if(!arguments.length)return this.binding&&this.binding()||this.property._value;if(!this.destroyed){if(this.binding)return this.binding(t),this.property;this.valueUpdate(t)}return this.property}function changeChecker(t,e){if(e){var e=new WhatChanged(t,e);return function(t){return Object.keys(e.update(t)).length>0}}var r=t;return function(t){return same(r,t)?void 0:(r=t,!0)}}function propertyBinding(t){return arguments.length?(is.binding(t)||(t=createBinding(t)),t===this.binding?this.property:(this.binding&&this.binding.removeListener("change",this.valueUpdate),this.binding=t,this.model&&this.property.attach(this.model,this.property._firm),this.binding.on("change",this.valueUpdate),this.valueUpdate(this.binding()),this.property)):this.binding}function attachProperty(t,e){return firmer(this.property,e)?this.property:(this.property._firm=e,t instanceof Object||(t={}),this.binding&&(this.model=t,this.binding.attach(t,1)),this.property._events&&"attach"in this.property._events&&this.property.emit("attach",t,1),this.property)}function detachProperty(t){return firmer(this.property,t)?this.property:(this.binding&&(this.binding.removeListener("change",this.valueUpdate),this.binding.detach(1),this.model=null),this.property._events&&"detach"in this.property._events&&this.property.emit("detach",1),this.property)}function updateProperty(){return this.destroyed||(this.property._update&&this.property._update(this.property._value,this.property),this.property.emit("update",this.property._value)),this.property}function propertyUpdater(t){return arguments.length?(this.property._update=t,this.property):this.property._update}function destroyProperty(){return this.destroyed||(this.destroyed=!0,this.property.removeAllListeners("change").removeAllListeners("update").removeAllListeners("attach"),this.property.emit("destroy"),this.property.detach(),this.binding&&this.binding.destroy(!0)),this.property}function propertyDestroyed(){return this.destroyed}function addPropertyTo(t,e){return t.setProperty(e,this.property),this.property}function createProperty(t,e,r){"function"==typeof e&&(r=e,e=null);var i=n=propertyTemplate.bind(i);i={hasChanged:changeChecker(t,e),valueUpdate:function(t){n._value=t,i.hasChanged(t)&&(n.emit("change",n._value),n.update())}};var n=i.property=propertyTemplate.bind(i);return n._value=t,n._update=r,setPrototypeOf(n,propertyProto),n.binding=propertyBinding.bind(i),n.attach=attachProperty.bind(i),n.detach=detachProperty.bind(i),n.update=updateProperty.bind(i),n.updater=propertyUpdater.bind(i),n.destroy=destroyProperty.bind(i),n.destroyed=propertyDestroyed.bind(i),n.addTo=addPropertyTo.bind(i),n}var Enti=require("enti"),WhatChanged=require("what-changed"),same=require("same-value"),firmer=require("./firmer"),createBinding=require("./binding"),functionEmitter=require("./functionEmitter"),setPrototypeOf=require("setprototypeof"),is=require("./is"),propertyProto=Object.create(functionEmitter);propertyProto._fastn_property=!0,propertyProto._firm=1,module.exports=createProperty;

},{"./binding":7,"./firmer":10,"./functionEmitter":11,"./is":14,"enti":17,"same-value":22,"setprototypeof":25,"what-changed":26}],32:[function(require,module,exports){
function run(){for(var e=Date.now();todo.length&&Date.now()-e<16;)todoKeys.shift(),todo.shift()();todo.length?requestAnimationFrame(run):scheduled=!1}function schedule(e,o){~todoKeys.indexOf(e)||(todo.push(o),todoKeys.push(e),scheduled||(scheduled=!0,requestAnimationFrame(run)))}var todo=[],todoKeys=[],scheduled,updates=0;module.exports=schedule;

},{}],33:[function(require,module,exports){
module.exports=function(e,t,n,o,r){function m(e){t.element&&t.element.parentNode&&t.element.parentNode.replaceChild(e,t.element),t.element=e}function p(){var n=t.data(),o=t.template();c.set("item",n);var r=o&&e.toComponent(o(c,t.scope(),t._currentComponent));return t._currentComponent&&t._currentComponent!==r&&e.isComponent(t._currentComponent)&&t._currentComponent.destroy(),t._currentComponent=r,r?void(e.isComponent(r)&&(t._settings.attachTemplates!==!1?r.attach(c,2):r.attach(t.scope(),1),t.element&&t.element!==r.element&&(null==r.element&&r.render(),m(t._currentComponent.element)))):void m(t.emptyElement)}var c=new e.Model({});return t.render=function(){var e;t.emptyElement=document.createTextNode(""),t._currentComponent&&(t._currentComponent.render(),e=t._currentComponent.element),t.element=e||t.emptyElement,t.emit("render")},t.setProperty("data",e.property(void 0,o.dataChanges||"value structure").on("change",p)),t.setProperty("template",e.property(void 0,"value").on("change",p)),t.on("destroy",function(){e.isComponent(t._currentComponent)&&t._currentComponent.destroy()}),t.on("attach",function(n){e.isComponent(t._currentComponent)&&t._currentComponent.attach(t.scope(),1)}),t};

},{}],34:[function(require,module,exports){
function updateText(){if(this.element){var e=this.text();this.element.textContent=null==e?"":e}}function autoRender(e){this.element=document.createTextNode(e)}function autoText(e,t,n){return e.render=autoRender.bind(e,n),e}function render(){this.element=this.createTextNode(this.text()),this.emit("render")}function textComponent(e,t,n,o,r){if(o.auto){if(delete o.auto,!e.isBinding(r[0]))return autoText(t,e,r[0]);o.text=r.pop()}return t.createTextNode=textComponent.createTextNode,t.render=render.bind(t),t.setProperty("text",e.property("",updateText.bind(t))),t}textComponent.createTextNode=function(e){return document.createTextNode(e)},module.exports=textComponent;

},{}],35:[function(require,module,exports){
var crel=require("crel"),doc=require("doc-js"),defaultCss=require("defaultcss");defaultCss("modal-component",".modal-component{position:fixed;top:0;bottom:0;left:0;right:0;}.modal-component .content{background:white}"),module.exports=function(e,t,n,o,c){function d(e){s&&clearTimeout(s),s=setTimeout(e,o.animationTime||0)}function l(e){doc(t.modalElement).removeClass(u).addClass(e),u=e,t.emit("state",u)}function r(){a&&(t.remove(a),a.destroy(),a=null)}function m(n){t.element&&(n?(i=Date.now(),r(),t._settings.content&&(a=e.toComponent(t._settings.content(t.scope())),t.insert(a)),t.modalElement.parentNode||crel(document.body,t.modalElement),l("showing"),d(function(){l("shown")})):(l("hiding"),d(function(){l("hidden"),t.modalElement.parentNode&&t.modalElement.parentNode.removeChild(t.modalElement),r()})))}var i;t.extend("_generic",o,c),t._type="modal",t._attachChildren=!1,t.render=function(){t.element=document.createTextNode(""),t.modalElement=crel("div",{"class":"modal-component"},t.containerElement=t.contentElement=crel("div",{"class":"content"})),t.emit("render");var e=function(e){t.show()&&!doc(e.target).closest(t.contentElement)&&t.show(!1)};return document.addEventListener("click",e,!0),t.on("destroy",function(){document.removeEventListener("click",e,!0),m(!1)}),t},t._insert=function(e,n){t.contentElement&&t.contentElement.childNodes[n]!==e&&t.contentElement.insertBefore(e,t.contentElement.childNodes[n])};var s,a,u="hidden";return t.setProperty("show"),t.show.updater(m),t},module.exports.expectedComponents=["text","_generic","list","templater"];

},{"crel":4,"defaultcss":36,"doc-js":38}],36:[function(require,module,exports){
"use strict";module.exports=function(e,d){var t=e+"_defaultstyle",o=document.getElementById(t),n=document.querySelector('link[rel="stylesheet"],style');return o?o:(o=document.createElement("style"),o.innerHTML=d,n?n.parentNode.insertBefore(o,n):document.head?document.head.appendChild(o):document.body&&document.body.childNodes.length>0?document.body.insertBefore(o,document.body.childNodes[0]):document.body&&document.body.appendChild(o),o)};

},{}],37:[function(require,module,exports){
function isIn(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return!0}function find(e,t){if(e=getTargets(e),null==t)return e;if(isList(e)){for(var n=[],r=0;r<e.length;r++)for(var s=doc.find(e[r],t),i=0;i<s.length;i++)isIn(n,s[i])||n.push(s[i]);return n}return e?e.querySelectorAll(t):[]}function findOne(e,t){if(e=getTarget(e),null==t)return e;if(isList(e)){for(var n,r=0;r<e.length&&!(n=findOne(e[r],t));r++);return n}return e?e.querySelector(t):null}function closest(e,t){for(e=getTarget(e),isList(e)&&(e=e[0]);e&&e.ownerDocument&&!is(e,t);)e=e.parentNode;return e===doc.document&&e!==t?null:e}function is(e,t){if(e=getTarget(e),isList(e)&&(e=e[0]),!e.ownerDocument||"string"!=typeof t)return e===t;if(e===t)return!0;var n=!e.parentNode;n&&document.createDocumentFragment().appendChild(e);var r=arrayProto.indexOf.call(find(e.parentNode,t),e)>=0;return n&&e.parentNode.removeChild(e),r}function addClass(e,t){if(e=getTargets(e),isList(e)){for(var n=0;n<e.length;n++)addClass(e[n],t);return this}if(!t)return this;for(var t=Array.isArray(t)?t:t.split(space),r=e.classList?null:e.className.split(space),n=0;n<t.length;n++){var s=t[n];s&&s!==space&&(e.classList?e.classList.add(s):!r.indexOf(s)>=0&&r.push(s))}return e.classList||(e.className=r.join(space)),this}function removeClass(e,t){if(e=getTargets(e),isList(e)){for(var n=0;n<e.length;n++)removeClass(e[n],t);return this}if(!t)return this;for(var t=Array.isArray(t)?t:t.split(space),r=e.classList?null:e.className.split(space),n=0;n<t.length;n++){var s=t[n];if(s&&s!==space)if(e.classList)e.classList.remove(s);else{var i=r.indexOf(s);i>=0&&r.splice(i,1)}}return e.classList||(e.className=r.join(space)),this}function addEvent(e){var t=getTarget(e.target);t?t.addEventListener(e.event,e.callback,!1):console.warn("No elements matched the selector, so no events were bound.")}function on(e,t,n,r){if(r=getTargets(r),!r&&(t=getTargets(t),isList(t))){for(var s=[],i=0;i<t.length;i++)s.push(on(e,t[i],n,r));return function(){for(;s.length;)s.pop()}}if(isList(r)){for(var s=[],i=0;i<r.length;i++)s.push(on(e,t,n,r[i]));return function(){for(;s.length;)s.pop()}}var a=[];"string"==typeof e&&(e=e.split(space));for(var i=0;i<e.length;i++){var o={};r?(r===!0&&(r=doc.document),o.target=r,o.callback=function(e){var r=closest(e.target,t);r&&n(e,r)}):(o.target=t,o.callback=n),o.event=e[i],addEvent(o),a.push(o)}return function(){for(;a.length;){var e=a.pop();getTarget(e.target).removeEventListener(e.event,e.callback)}}}function off(e,t,n,r){if(isList(t)){for(var s=0;s<t.length;s++)off(e,t[s],n,r);return this}if(r instanceof Array){for(var s=0;s<r.length;s++)off(e,t,n,r[s]);return this}"string"==typeof e&&(e=e.split(space)),"function"!=typeof n&&(r=n,n=null),r=r?getTarget(r):doc.document;for(var i="string"==typeof t?find(t,r):[t],a=0;a<i.length;a++)for(var o=i[a],s=0;s<e.length;s++)o.removeEventListener(e[s],n);return this}function append(e,t){var e=getTarget(e),t=getTarget(t);if(isList(e)&&(e=e[0]),isList(t))for(var n=0;n<t.length;n++)append(e,t[n]);else e.appendChild(t)}function prepend(e,t){var e=getTarget(e),t=getTarget(t);if(isList(e)&&(e=e[0]),isList(t))for(var n=t.length-1;n;n--)prepend(e,t[n]);else e.insertBefore(t,e.firstChild)}function isVisible(e){var e=getTarget(e);if(e){if(isList(e)){for(var t=-1;e[t++]&&isVisible(e[t]););return e.length>=t}for(;e.parentNode&&"none"!==e.style.display;)e=e.parentNode;return e===doc.document}}function indexOfElement(e){if(e=getTargets(e)){isList(e)&&(e=e[0]);var t=-1,n=e.parentElement;if(!n)return t;for(;n.children[++t]!==e;);return t}}function ready(e){!doc.document||"complete"!==doc.document.readyState&&"interactive"!==doc.document.readyState?window.attachEvent?(document.attachEvent("onreadystatechange",e),window.attachEvent("onLoad",e)):document.addEventListener&&document.addEventListener("DOMContentLoaded",e,!1):e()}var doc={document:"undefined"!=typeof document?document:null,setDocument:function(e){this.document=e}},arrayProto=[],isList=require("./isList"),getTargets=require("./getTargets")(doc.document),getTarget=require("./getTarget")(doc.document),space=" ";doc.find=find,doc.findOne=findOne,doc.closest=closest,doc.is=is,doc.addClass=addClass,doc.removeClass=removeClass,doc.off=off,doc.on=on,doc.append=append,doc.prepend=prepend,doc.isVisible=isVisible,doc.ready=ready,doc.indexOfElement=indexOfElement,module.exports=doc;

},{"./getTarget":39,"./getTargets":40,"./isList":41}],38:[function(require,module,exports){
function Floc(o){this.push.apply(this,o)}function floc(o){var t=getTargets(o);return isList(t)||(t=t?[t]:[]),new Floc(t)}var doc=require("./doc"),isList=require("./isList"),getTargets=require("./getTargets")(doc.document),flocProto=[];Floc.prototype=flocProto,flocProto.constructor=Floc;var returnsSelf="addClass removeClass append prepend".split(" ");for(var key in doc)"function"==typeof doc[key]&&(floc[key]=doc[key],flocProto[key]=function(o){var t=this;return function(r,e,c,n,s,i){var f=doc[o](this,r,e,c,n,s,i);return f!==doc&&isList(f)?floc(f):returnsSelf.indexOf(o)>=0?t:f}}(key));flocProto.on=function(o,t,r){var e=this;return"function"==typeof t&&(r=t,t=this,e=null),doc.on(o,t,r,e),this},flocProto.off=function(o,t,r){var e=this;return"function"==typeof t&&(r=t,t=this,e=null),doc.off(o,t,r,e),this},flocProto.ready=function(o){return doc.ready(o),this},flocProto.addClass=function(o){return doc.addClass(this,o),this},flocProto.removeClass=function(o){return doc.removeClass(this,o),this},module.exports=floc;

},{"./doc":37,"./getTargets":40,"./isList":41}],39:[function(require,module,exports){
var singleId=/^#\w+$/;module.exports=function(e){return function(n){return"string"==typeof n?singleId.exec(n)?e.getElementById(n.slice(1)):e.querySelector(n):n}};

},{}],40:[function(require,module,exports){
var singleClass=/^\.\w+$/,singleId=/^#\w+$/,singleTag=/^\w+$/;module.exports=function(e){return function(l){return"string"==typeof l?singleId.exec(l)?[e.getElementById(l.slice(1))]:singleTag.exec(l)?e.getElementsByTagName(l):singleClass.exec(l)?e.getElementsByClassName(l.slice(1)):e.querySelectorAll(l):l}};

},{}],41:[function(require,module,exports){
module.exports=function(e){return null!=e&&"object"==typeof e&&"length"in e&&!("nodeType"in e)&&e.self!=e};

},{}],42:[function(require,module,exports){
function values(e){if(Array.isArray(e))return e.slice();var t=[];for(var n in e)t.push(e[n]);return t}var defaultCss=require("defaultcss");defaultCss("picker-component",".picker-component-modal{position:fixed;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,0.5);}.picker-component-modal .content{background:white}"),module.exports=function(e,t,n,i,o){function a(e){if(t.show()){if(~g.indexOf(e.which)){e.preventDefault();var n=values(w.get("options")),i=n.indexOf(w.get("value")),o=(i+(e.which===d?-1:1)+n.length)%n.length;w.set("value",n[o])}~h.indexOf(e.which)&&t.show(!1)}else~v.indexOf(e.which)&&(e.preventDefault(),t.show(!0))}function r(n,o){return i.itemTemplate(n,o,function(){if(t.multiple()){var e=w.get("value"),o=n.get("item");Array.isArray(e)||(e=[],t.value(e));var a=e.indexOf(o);return void(~a?w.remove("value",a):w.push("value",n.get("item")))}w.set("value",n.get("item")),setTimeout(function(){w.set("show",!1),t.element&&t.element.focus()},i.closeDelay||0)},function(n){return e("div",{"class":e.binding("item",e.binding("value|*").attach(w),function(e,n){var i=t.multiple()&&Array.isArray(n)&&~n.indexOf(e)||e===n;return["option",i?"selected":""]})},e("i",{"class":e.binding("multiple",function(e){return e&&"selectedIcon"}).attach(w)}),n)})}function l(e){var n=w.get("options"),o=Array.isArray(n)?n.filter(function(t){return i.pickValue(t)===e}).pop():e;w.set("value",t.multiple()?e||[]:o)}function u(e){e&&!Array.isArray(w.get("value"))&&w.set("value",[])}var s=9,c=13,p=27,m=40,d=38,f=32,h=[s,p,c],v=[m,f],g=[d,m],w=new e.Model({options:[],show:!1}),b=new e.Model({item:null});return i.itemTemplate||(i.itemTemplate=function(t,n,i,o){return o(e.binding("item")).on("click",i)}),i.pickValue||(i.pickValue=function(e){return e}),i.currentTemplate||(i.currentTemplate=function(t,n){return e.binding("item",function(e){return e||"Pick a value"})}),w.on("value",function(e){b.set("item",e)}),i.tabindex=0,i["class"]=e.binding("show",e.binding.from(i["class"]),function(e,t){return["picker-component",e?"show":"",t]}).attach(w),t.extend("_generic",i,o),t.setProperty("options"),t.setProperty("value"),t.setProperty("multiple"),t.setProperty("show"),t.on("keydown",a),t.insert(e("div",{"class":"current"},e("templater",{"class":"current",data:e.binding("value").attach(w),template:i.currentTemplate})).on("click",function(){w.set("show",!w.get("show")),t.element.focus()}),e("modal",{show:e.binding("show").attach(w),content:function(t){return e("div",e("list",{"class":"options",items:e.binding("options|*"),template:r}).attach(w),e("templater",{data:e.binding("options|*",function(e){return e&&!!Object.keys(e).length}).attach(w),template:function(t){return t.get("item")?void 0:e("h3","There are no options available")}}),e("nav",{"class":"footer"},e("templater",{data:e.binding("multiple").attach(w),template:function(t){return t.get("item")?e("button",{type:"button"},"OK").on("click",function(){w.set("show",!1)}):void 0}}))).on("keydown",a)}}).on("render",function(){this.modalElement.classList&&this.modalElement.classList.add("picker-component-modal")})),t.options.on("update",function(){var e=t.options();e&&"object"==typeof e&&(w.set("options",e),l(t.value()))}),w.on("options",t.options),w.on("multiple",u),u(i.multiple),t.value.on("change",l),w.on("value|*",function(e){t.value(i.pickValue(e)),t.emit("change",e)}),t.show.on("change",w.set.bind(w,"show")),w.on("show",t.show),t.multiple.on("change",w.set.bind(w,"multiple")),t.on("destroy",w.detach.bind(w)),t},module.exports.expectedComponents=["modal","text","_generic","list","templater"];

},{"defaultcss":5}]},{},[1]);
